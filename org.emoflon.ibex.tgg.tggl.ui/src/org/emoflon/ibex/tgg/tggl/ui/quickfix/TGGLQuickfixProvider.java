/*
 * generated by Xtext 2.27.0
 */
package org.emoflon.ibex.tgg.tggl.ui.quickfix;

import org.eclipse.xtext.ui.editor.model.IXtextDocument;
import org.eclipse.xtext.ui.editor.model.edit.IModificationContext;
import org.eclipse.xtext.ui.editor.quickfix.Fix;
import org.eclipse.xtext.ui.editor.quickfix.IssueResolutionAcceptor;
import org.eclipse.xtext.validation.Issue;
import org.emoflon.ibex.common.slimgt.ui.quickfix.SlimGTQuickfixProvider;
import org.emoflon.ibex.tgg.tggl.validation.IssueCodes;

/**
 * Custom quickfixes.
 *
 * See https://www.eclipse.org/Xtext/documentation/310_eclipse_support.html#quick-fixes
 */
public class TGGLQuickfixProvider extends SlimGTQuickfixProvider {

	@Fix(IssueCodes.INCORRECT_BINDING_EDGE_CREATE)
	public void changeToContextEdge(Issue issue, IssueResolutionAcceptor acceptor) {
		acceptor.accept(issue, //
				"Change binding type", //
				"Change binding type from 'create' to 'context'", //
				null, //
				(IModificationContext context) -> {
					IXtextDocument xtextDocument = context.getXtextDocument();
					String s = xtextDocument.get(issue.getOffset(), issue.getLength());
					xtextDocument.replace(issue.getOffset() + s.indexOf("+"), 1, "=");
				});
	}
	
	@Fix(IssueCodes.INCORRECT_BINDING_EDGE_CONTEXT)
	public void changeToCreateEdge(Issue issue, IssueResolutionAcceptor acceptor) {
		acceptor.accept(issue, //
				"Change binding type", //
				"Change binding type from 'context' to 'create'", //
				null, //
				(IModificationContext context) -> {
					IXtextDocument xtextDocument = context.getXtextDocument();
					String s = xtextDocument.get(issue.getOffset(), issue.getLength());
					xtextDocument.replace(issue.getOffset() + s.indexOf("="), 1, "+");
				});
	}

}
